!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("srs",[],n):"object"==typeof exports?exports.srs=n():(e.millan=e.millan||{},e.millan.srs=n())}("undefined"!=typeof self?self:this,function(){return function(e){function n(n){for(var r,i,c=n[0],u=n[1],s=n[2],f=0,p=[];f<c.length;f++)i=c[f],a[i]&&p.push(a[i][0]),a[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(n);p.length;)p.shift()();return o.push.apply(o,s||[]),t()}function t(){for(var e,n=0;n<o.length;n++){for(var t=o[n],r=!0,c=1;c<t.length;c++){var u=t[c];0!==a[u]&&(r=!1)}r&&(o.splice(n--,1),e=i(i.s=t[0]))}return e}var r={},a={6:0},o=[];function i(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=r,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)i.d(t,r,function(n){return e[n]}.bind(null,r));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="";var c=("undefined"!=typeof self?self:this).webpackJsonp=("undefined"!=typeof self?self:this).webpackJsonp||[],u=c.push.bind(c);c.push=n,c=c.slice();for(var s=0;s<c.length;s++)n(c[s]);var l=u;return o.push([61,0,1]),t()}({14:function(e,n,t){"use strict";t.d(n,"a",function(){return TurtleParser});var r,a=t(4),o=t(0),i=(r=function(e,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)},function(e,n){function t(){this.constructor=e}r(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),c=function(){return(c=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)},TurtleParser=function(e){function TurtleParser(n,t,r,i){void 0===t&&(t=a.b),void 0===r&&(r=t),void 0===i&&(i=!0);var u=e.call(this,t,c({outputCst:!0,recoveryEnabled:!0},n))||this;return u.namespacesMap={},u.semanticErrors=[],u.resetManagedState=function(){u.namespacesMap={},u.semanticErrors=[]},u.tokenize=function(e){return u.lexer.tokenize(e).tokens},u.parse=function(e){u.input=u.lexer.tokenize(e).tokens;var n=u.turtleDoc(),t=u.errors.slice(),r=u.semanticErrors.slice();return u.resetManagedState(),{errors:t,semanticErrors:r,cst:n}},u.turtleDoc=u.RULE("turtleDoc",function(){u.MANY(function(){return u.SUBRULE(u.statement)})}),u.statement=u.RULE("statement",function(){u.OR([{ALT:function(){return u.SUBRULE(u.directive)}},{ALT:function(){u.SUBRULE(u.triples),u.CONSUME(a.a.Period)}}])}),u.directive=u.RULE("directive",function(){u.OR([{ALT:function(){return u.SUBRULE(u.prefixID)}},{ALT:function(){return u.SUBRULE(u.base)}},{ALT:function(){return u.SUBRULE(u.sparqlPrefix)}},{ALT:function(){return u.SUBRULE(u.sparqlBase)}}])}),u.prefixID=u.RULE("prefixID",function(){u.CONSUME(a.a.TTL_PREFIX);var e=u.CONSUME(a.a.PNAME_NS),n=u.CONSUME(a.a.IRIREF),t=e.image.slice(0,-1),r=n.image;u.namespacesMap[t]=r,u.CONSUME(a.a.Period)}),u.base=u.RULE("base",function(){u.CONSUME(a.a.TTL_BASE),u.CONSUME(a.a.IRIREF),u.CONSUME(a.a.Period)}),u.sparqlBase=u.RULE("sparqlBase",function(){u.CONSUME(a.a.BASE),u.CONSUME(a.a.IRIREF)}),u.sparqlPrefix=u.RULE("sparqlPrefix",function(){u.CONSUME(a.a.PREFIX);var e=u.CONSUME(a.a.PNAME_NS),n=u.CONSUME(a.a.IRIREF),t=e.image.slice(0,-1),r=n.image;u.namespacesMap[t]=r}),u.triples=u.RULE("triples",function(){u.OR([{ALT:function(){u.SUBRULE(u.subject),u.SUBRULE(u.predicateObjectList)}},{ALT:function(){u.SUBRULE(u.blankNodePropertyList),u.OPTION(function(){return u.SUBRULE1(u.predicateObjectList)})}}])}),u.predicateObjectList=u.RULE("predicateObjectList",function(){u.SUBRULE(u.verb),u.SUBRULE(u.objectList),u.MANY(function(){u.CONSUME(a.a.Semicolon),u.OPTION(function(){u.SUBRULE1(u.verb),u.SUBRULE1(u.objectList)})})}),u.subject=u.RULE("subject",function(){u.OR([{ALT:function(){return u.SUBRULE(u.iri)}},{ALT:function(){return u.SUBRULE(u.BlankNode)}},{ALT:function(){return u.SUBRULE(u.collection)}}])}),u.predicate=u.RULE("predicate",function(){u.SUBRULE(u.iri)}),u.objectList=u.RULE("objectList",function(){u.SUBRULE(u.object),u.MANY(function(){u.CONSUME(a.a.Comma),u.SUBRULE1(u.object)})}),u.verb=u.RULE("verb",function(){u.OR([{ALT:function(){return u.SUBRULE(u.predicate)}},{ALT:function(){return u.CONSUME(a.a.A)}}])}),u.literal=u.RULE("literal",function(){u.OR([{ALT:function(){return u.SUBRULE(u.RDFLiteral)}},{ALT:function(){return u.SUBRULE(u.NumericLiteral)}},{ALT:function(){return u.SUBRULE(u.BooleanLiteral)}}])}),u.blankNodePropertyList=u.RULE("blankNodePropertyList",function(){u.CONSUME(a.a.LBracket),u.SUBRULE(u.predicateObjectList),u.CONSUME(a.a.RBracket)}),u.object=u.RULE("object",function(){u.OR([{ALT:function(){return u.SUBRULE(u.iri)}},{ALT:function(){return u.SUBRULE(u.BlankNode)}},{ALT:function(){return u.SUBRULE(u.collection)}},{ALT:function(){return u.SUBRULE(u.blankNodePropertyList)}},{ALT:function(){return u.SUBRULE(u.literal)}}])}),u.collection=u.RULE("collection",function(){u.CONSUME(a.a.LParen),u.MANY(function(){return u.SUBRULE(u.object)}),u.CONSUME(a.a.RParen)}),u.NumericLiteral=u.RULE("NumericLiteral",function(){u.OR([{ALT:function(){return u.CONSUME(a.a.INTEGER)}},{ALT:function(){return u.CONSUME(a.a.DECIMAL)}},{ALT:function(){return u.CONSUME(a.a.DOUBLE)}}])}),u.RDFLiteral=u.RULE("RDFLiteral",function(){u.SUBRULE(u.String),u.OPTION(function(){u.OR([{ALT:function(){return u.CONSUME(a.a.LANGTAG)}},{ALT:function(){u.CONSUME(a.a.DoubleCaret),u.SUBRULE(u.iri)}}])})}),u.BooleanLiteral=u.RULE("BooleanLiteral",function(){u.OR([{ALT:function(){return u.CONSUME(a.a.TRUE)}},{ALT:function(){return u.CONSUME(a.a.FALSE)}}])}),u.String=u.RULE("String",function(){u.OR([{ALT:function(){return u.CONSUME(a.a.STRING_LITERAL_QUOTE)}},{ALT:function(){return u.CONSUME(a.a.STRING_LITERAL_SINGLE_QUOTE)}},{ALT:function(){return u.CONSUME(a.a.STRING_LITERAL_LONG_SINGLE_QUOTE)}},{ALT:function(){return u.CONSUME(a.a.STRING_LITERAL_LONG_QUOTE)}}])}),u.iri=u.RULE("iri",function(){u.OR([{ALT:function(){return u.CONSUME(a.a.IRIREF)}},{ALT:function(){return u.SUBRULE(u.PrefixedName)}}])}),u.PrefixedName=u.RULE("PrefixedName",function(){var e=u.OR([{ALT:function(){return u.CONSUME(a.a.PNAME_LN)}},{ALT:function(){return u.CONSUME(a.a.PNAME_NS)}}]);e.image.slice(0,e.image.indexOf(":"))in u.namespacesMap||u.semanticErrors.push({name:"NoNamespacePrefixError",message:"A prefix was used for which there was no namespace defined.",token:e,context:{ruleStack:u.getHumanReadableRuleStack(),ruleOccurrenceStack:u.RULE_OCCURRENCE_STACK.slice()},resyncedTokens:[]})}),u.BlankNode=u.RULE("BlankNode",function(){u.OR([{ALT:function(){return u.CONSUME(a.a.BLANK_NODE_LABEL)}},{ALT:function(){return u.CONSUME(a.a.ANON)}}])}),u.lexer=new o.Lexer(r),i&&o.Parser.performSelfAnalysis(u),u}return i(TurtleParser,e),TurtleParser}(o.Parser)},18:function(e,n,t){"use strict";t.d(n,"a",function(){return W3SpecSparqlParser});var r,a=t(1),o=t(12),i=t(0),c=(r=function(e,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)},function(e,n){function t(){this.constructor=e}r(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),W3SpecSparqlParser=function(e){function W3SpecSparqlParser(n){var t=e.call(this,n,a.a)||this;return i.Parser.performSelfAnalysis(t),t}return c(W3SpecSparqlParser,e),W3SpecSparqlParser}(o.a)},4:function(e,n,t){"use strict";var r=t(1),a=t(0),o=t(3),i=t(5),c=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,u={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},s=/^"([^"\\\r\n]+)"/,l=/^'([^'\\\r\n]+)'/,f=/^"((?:[^"\\\r\n]|\\.)*)"(?=[^"])/,p=/^'((?:[^'\\\r\n]|\\.)*)'(?=[^'])/,E=/^"""([^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*)"""/,L=/^'''([^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*)'''/,d=/[\x00-\x20<>\\"\{\}\|\^\`]/,T=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,R=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,S=function(e){try{return e.replace(c,function(e,n,t,r){if(n)return String.fromCharCode(parseInt(n,16));if(t){var a=parseInt(t,16);return a<=65535?String.fromCharCode(a):String.fromCharCode(55296+(a-=65536)/1024,56320+(1023&a))}var o=u[r];if(!o)throw new Error;return o})}catch(e){return null}};t.d(n,"a",function(){return O}),t.d(n,"b",function(){return U});var N=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,O={Comment:Object(a.createToken)({name:"Comment",pattern:/#[^\n]*/,group:"comments"}),LBracket:r.d.LBracket,RBracket:r.d.RBracket,LParen:r.d.LParen,RParen:r.d.RParen,Period:r.d.Period,WhiteSpace:r.d.WhiteSpace,TRUE:r.d.TRUE,FALSE:r.d.FALSE,DoubleCaret:r.d.DoubleCaret,Comma:r.d.Comma,Semicolon:r.d.Semicolon,A:r.d.A,PREFIX:r.d.PREFIX,BASE:r.d.BASE,PNAME_NS:r.d.PNAME_NS,PNAME_LN:r.d.PNAME_LN,BLANK_NODE_LABEL:r.d.BLANK_NODE_LABEL,TTL_BASE:Object(a.createToken)({name:"TTL_BASE",pattern:/@base/}),TTL_PREFIX:Object(a.createToken)({name:"TTL_PREFIX",pattern:/@prefix/}),LANGTAG:r.d.LANGTAG,INTEGER:Object(a.createToken)({name:"INTEGER",pattern:o.a.and(o.a.option(/[+-]/),/\d+/)}),DECIMAL:Object(a.createToken)({name:"DECIMAL",pattern:o.a.and(o.a.option(/[+-]/),/(\d*\.\d+)/)}),DOUBLE:Object(a.createToken)({name:"DOUBLE",pattern:o.a.and(o.a.option(/[+-]/),o.a.or(o.a.and(/\d+\.\d*/,i.k),o.a.and(/\.\d+/,i.k),o.a.and(/\d+/,i.k)))}),EXPONENT:Object(a.createToken)({name:"EXPONENT",pattern:i.k}),ECHAR:Object(a.createToken)({name:"ECHAR",pattern:i.j}),ANON:r.d.ANON,PLX:Object(a.createToken)({name:"PLX",pattern:i.t}),PERCENT:r.d.PERCENT,HEX:Object(a.createToken)({name:"HEX",pattern:i.l}),STRING_LITERAL_LONG_SINGLE_QUOTE:Object(a.createToken)({name:"STRING_LITERAL_LONG_SINGLE_QUOTE",pattern:function(e,n){void 0===n&&(n=0);var t=L.exec(e.slice(n));return t&&null!==S(t[1])?t:null},line_breaks:!0}),STRING_LITERAL_LONG_QUOTE:Object(a.createToken)({name:"STRING_LITERAL_LONG_QUOTE",pattern:function(e,n){void 0===n&&(n=0);var t=E.exec(e.slice(n));return t&&null!==S(t[1])?t:null},line_breaks:!0}),STRING_LITERAL_QUOTE:Object(a.createToken)({name:"STRING_LITERAL_QUOTE",pattern:function(e,n){void 0===n&&(n=0);var t=e.slice(n),r=s.exec(t);return r||((r=f.exec(t))?null===S(r[1])?null:r:null)},line_breaks:!1}),STRING_LITERAL_SINGLE_QUOTE:Object(a.createToken)({name:"STRING_LITERAL_SINGLE_QUOTE",pattern:function(e,n){void 0===n&&(n=0);var t=e.slice(n),r=l.exec(t);return r||((r=p.exec(t))?null===S(r[1])?null:r:null)},line_breaks:!1}),UCHAR:Object(a.createToken)({name:"UCHAR",pattern:function(e,n){return void 0===n&&(n=0),N.exec(e.slice(n))},line_breaks:!1}),IRIREF:Object(a.createToken)({name:"IRIREF",pattern:function(e,n){void 0===n&&(n=0);var t=e.slice(n),r=R.exec(t);if(r)return r;if(!(r=T.exec(t)))return null;var a=S(r[1]);return null===a||d.test(a)?null:r},line_breaks:!1}),PN_CHARS_BASE:Object(a.createToken)({name:"PN_CHARS_BASE",pattern:i.x}),PN_CHARS_U:Object(a.createToken)({name:"PN_CHARS_U",pattern:i.y}),PN_CHARS:Object(a.createToken)({name:"PN_CHARS",pattern:i.w}),PN_PREFIX:Object(a.createToken)({name:"PN_PREFIX",pattern:i.B}),PN_LOCAL:Object(a.createToken)({name:"PN_LOCAL",pattern:i.z}),PN_LOCAL_ESC:Object(a.createToken)({name:"PN_LOCAL_ESC",pattern:i.A}),Unknown:Object(a.createToken)({name:"Unknown",pattern:/\w+/})},U=[O.Comment,r.d.ANON,r.d.LBracket,r.d.RBracket,r.d.LParen,r.d.RParen,r.d.WhiteSpace,r.d.TRUE,r.d.FALSE,r.d.Comma,r.d.Semicolon,r.d.PNAME_NS,r.d.A,r.d.PREFIX,r.d.BASE,r.d.PNAME_LN,r.d.BLANK_NODE_LABEL,O.TTL_BASE,O.TTL_PREFIX,r.d.LANGTAG,O.DOUBLE,O.DECIMAL,r.d.Period,r.d.DoubleCaret,O.IRIREF,O.STRING_LITERAL_LONG_SINGLE_QUOTE,O.STRING_LITERAL_LONG_QUOTE,O.STRING_LITERAL_QUOTE,O.STRING_LITERAL_SINGLE_QUOTE,O.INTEGER,O.EXPONENT,O.PLX,r.d.PERCENT,O.HEX,O.PN_CHARS_BASE,O.PN_CHARS_U,O.PN_CHARS,O.PN_PREFIX,O.PN_LOCAL,O.PN_LOCAL_ESC,O.ECHAR,O.UCHAR,O.Unknown]},61:function(e,n,t){"use strict";t.r(n);var r,a,o=t(1),i=t(4),c=t(0),u=t(5);!function(e){e.TURTLE="turtle",e.IFCLAUSE="ifclause",e.THENCLAUSE="thenclause"}(a||(a={}));var s,l,f=Object(c.createToken)({name:"Rule",pattern:/rule/i}),p=Object(c.createToken)({name:"If",pattern:/if/i,push_mode:a.IFCLAUSE}),E=Object(c.createToken)({name:"Then",pattern:/then/i,push_mode:a.THENCLAUSE}),L=Object(c.createToken)({name:"EndThen",pattern:"}",pop_mode:!0}),d=Object(c.createToken)({name:"GroupGraphPattern",pattern:function(e,n){if(void 0===n&&(n=0),"{"!==e[n])return null;var t,r=1;for(t=n+1;t<e.length&&r>0;t++)"{"===e[t]?r++:"}"===e[t]&&r--;return r>0?null:u.c.exec(e.slice(n,t))},line_breaks:!0,pop_mode:!0}),T=Object(c.createToken)({name:"TriplesBlock",pattern:/[^{}]+/,line_breaks:!0}),R=i.b.indexOf(i.a.IRIREF),S={modes:(r={},r[a.TURTLE]=i.b.slice(0,R+1).concat([f,p,E],i.b.slice(R+1)),r[a.IFCLAUSE]=[i.a.WhiteSpace,d],r[a.THENCLAUSE]=[i.a.WhiteSpace,o.d.LCurly,L,T],r),defaultMode:a.TURTLE},N={Rule:f,If:p,Then:E,EndThen:L,GroupGraphPattern:d,TriplesBlock:T},O=[f,p,E,L,o.d.LCurly].concat(i.b,[d,T]),TurtleParser=t(14),U=t(8),m=function(){return(m=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)},_=Object.freeze(["","rdf","rdfs","xsd","owl","stardog"].reduce(function(e,n){var t;return m({},e,((t={})[n]=!0,t))},{})),W3SpecSparqlParser=t(18),A=(s=function(e,n){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(e,n)},function(e,n){function t(){this.constructor=e}s(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),C=function(e){return new(function(e){function n(){var n=e.call(this)||this;return n.groupGraphPatterns=[],n.triplesBlocks=[],n.IfClause=function(e,t){var r=e.GroupGraphPattern;n.$storePlaceholderTokenReplacement({tokenStore:n.groupGraphPatterns,originalTokenContext:r,subParserRule:n.sparqlParser.parseGroupGraphPattern.bind(n.sparqlParser),cstInputTokens:t})},n.ThenClause=function(e,t){var r=e.TriplesBlock;n.$storePlaceholderTokenReplacement({tokenStore:n.triplesBlocks,originalTokenContext:r,subParserRule:n.sparqlParser.parseTriplesBlock.bind(n.sparqlParser),cstInputTokens:t})},n.$storePlaceholderTokenReplacement=function(e){var t=e.tokenStore,r=e.originalTokenContext,a=void 0===r?[]:r,o=e.subParserRule,i=e.cstInputTokens,c=e.stripWrappers,u=a[0];if(u&&"string"==typeof u.image){var s=n.$getPlaceholderTokenReplacement(u,o,i,c);t.push({parseResult:s,originalToken:u})}},n.$getPlaceholderTokenReplacement=function(e,n,t,r){void 0===r&&(r=!1);for(var a=e.image,o="",i=0,c=0,u=0;u<t.length;u++){var s=t[u];if(u>0){var l=s.startLine-c,f=s.startOffset-1-i-l;l>0?(o+="\n".repeat(l-1),o+=" ".repeat(Math.max(f,0))+"\n"):o+=" ".repeat(Math.max(f,0))}if(s===e)break;s.image.split("\n").forEach(function(e,n){n>0&&(o+="\n"),o+=" ".repeat(e.length)}),i=s.endOffset,c=s.endLine}var p=r?" "+a.slice(1,-1)+" ":a;return n(""+o+p)},n.$getGroupGraphPatterns=function(){return n.groupGraphPatterns},n.$getTriplesBlocks=function(){return n.triplesBlocks},n.$resetState=function(){n.groupGraphPatterns=[],n.triplesBlocks=[]},n.sparqlParser=new W3SpecSparqlParser.a,n.validateVisitor(),n}return A(n,e),n}(e))};function b(e,n){return e.concat(n.parseResult.errors)}function P(e,n,t,r){var a=t.find(function(n){return n.originalToken===e});return a&&(n.children[r]=[a.parseResult.cst]),a}var k=/(?:[A-Z]+Expression|ValueLogical)$/i,h=function(){return!1},I=((l={})[o.d.EXISTS.tokenName]="ExistsFunction",l[o.d.NOT_EXISTS.tokenName]="NotExistsFunction",l[o.d.NOW.tokenName]="BuiltInCall_NOW",l),v=Object.keys(I),B=[o.d.DOUBLE,o.d.DECIMAL,o.d.INTEGER,o.d.DOUBLE_POSITIVE,o.d.DECIMAL_POSITIVE,o.d.INTEGER_POSITIVE,o.d.DOUBLE_NEGATIVE,o.d.DECIMAL_NEGATIVE,o.d.INTEGER_NEGATIVE,o.d.STRING_LITERAL1,o.d.STRING_LITERAL2,o.d.STRING_LITERAL_LONG1,o.d.STRING_LITERAL_LONG2].map(function(e){return e.tokenName});function M(e,n,t,r,a){if(void 0===a&&(a=h),!e)return[];for(var o=[],i=e;Object(U.a)(i.node)&&!t.includes(i.node.name);){if(a(i))return[];i=i.parentCtx}for(;Object(U.a)(i.node);){if(o.unshift(i.node.name),a(i))return[];i=i.parentCtx}for("string"==typeof r&&o.unshift(r),i=n;i;){if(Object(U.a)(i.node)&&(o.unshift(i.node.name),a(i)))return[];i=i.parentCtx}return["SrsDoc"].concat(o)}var j=function(e){return{name:e.name,message:e.message,token:e.node,context:{ruleStack:e.ruleStack,ruleOccurrenceStack:[]},resyncedTokens:[]}},y=function(e,n,t,r){return j({name:"NoNamespacePrefixError",message:'A prefix ("'+e.image+'") was used for which there was no namespace defined.',node:e,ruleStack:M(n,t,["PrefixedName"],r)})},G=function(e,n,t){return j({name:"DisallowedTokenError",message:"Token "+e.tokenType.tokenName+" cannot be used in Stardog Rules.",node:e,ruleStack:M(n,t,[I[e.tokenType.tokenName]],"GroupGraphPattern")})},x=function(e,n,t,r){var a=null,o=!1,i=null,c=M(n,t,["Expression","TriplesSameSubjectPath"],r,function(e){var n=e.node,t=e.parentCtx,r=n.name;if("PropertyListPathNotEmpty"===r)return a=e,!1;if(!o&&k.test(r))return o=t.node.children[r].length>1,!1;var c="Expression"===r,u="TriplesSameSubjectPath"===r;if(!c&&!u)return!1;var s=c&&"Bind"===t.node.name&&!o,l=u&&(!a||"TriplesSameSubjectPath"!==a.parentCtx.node.name);return!s&&!l||(i=s?"Bind":"TriplesBlock",!1)});if(0!==c.length)return j({name:"DisallowedLiteralError",message:"Token "+e.tokenType.tokenName+" ("+e.image+") cannot be used as a subject inside of a "+i+" in Stardog Rules Syntax.",node:e,ruleStack:c})};var g=function(){var e=function(n,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])})(n,t)};return function(n,t){function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),F=function(){return(F=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)},D=function(e){function SrsParser(n){var t=e.call(this,F({outputCst:!0,recoveryEnabled:!0},n),O,S,!1)||this;return t.baseNamespacesMap=Object.freeze(F({},_)),t.namespacesMap={},t.visitCst=function(e){if(t.sparqlSrsVisitor)t.sparqlSrsVisitor.$resetState();else{var n=t.getBaseCstVisitorConstructorWithDefaults();t.sparqlSrsVisitor=C(n)}t.sparqlSrsVisitor.visit(e,t.input)},t.getSparqlRulesFromVisitor=function(e){return t.visitCst(e),{groupGraphPatterns:t.sparqlSrsVisitor.$getGroupGraphPatterns(),triplesBlocks:t.sparqlSrsVisitor.$getTriplesBlocks()}},t.resetManagedState=function(){t.namespacesMap=F({},_),t.semanticErrors=[]},t.setBaseNamespaces=function(e){t.baseNamespacesMap=F({},e)},t.tokenize=function(e){return t.lexer.tokenize(e).tokens},t.parse=function(e){t.resetManagedState(),t.input=t.lexer.tokenize(e).tokens;var n=t.SrsDoc(),r=t.getSparqlRulesFromVisitor(n),a=r.groupGraphPatterns,o=r.triplesBlocks,i=t.errors.concat(a.reduce(b,[]),o.reduce(b,[])),c=t.semanticErrors.slice();return Object(U.c)(n,function(e,n){var r=e.node,u=e.parentCtx;if(Object(U.a)(r))return n();var s=r.tokenType.tokenName;if("GroupGraphPattern"===s||"TriplesBlock"===s){var l=u.node;if("IfClause"===l.name)(f=P(r,l,a,"GroupGraphPattern"))&&function(e){var n=e.cst,t=e.namespacesMap,r=e.fullCtx,a=e.errors,o=e.semanticErrors;Object(U.b)(n,function(e,n){var i=e.node,c=e.parentCtx;if(Object(U.a)(i))return n();var u=i.tokenType.tokenName;if(v.some(function(e){return e===u})&&a.push(G(i,c,r)),B.some(function(e){return e===i.tokenType.tokenName})){var s=x(i,c,r,"GroupGraphPattern");s&&a.push(s)}if("PNAME_NS"===u||"PNAME_LN"===u){var l=i.image.split(":").shift();t[l]||o.push(y(i,c,r,"GroupGraphPattern"))}})}({fullCtx:e,namespacesMap:F({},t.baseNamespacesMap,t.namespacesMap),cst:f.parseResult.cst,errors:i,semanticErrors:c});else if("ThenClause"===l.name){var f;(f=P(r,l,o,"TriplesBlock"))&&function(e){var n=e.cst,t=e.namespacesMap,r=e.errors,a=e.semanticErrors,o=e.fullCtx;Object(U.b)(n,function(e,n){var i=e.node,c=e.parentCtx;if(Object(U.a)(i))return n();var u=i.tokenType.tokenName;if(B.some(function(e){return e===i.tokenType.tokenName})){var s=x(i,c,o,"GroupGraphPattern");s&&r.push(s)}if("PNAME_NS"===u||"PNAME_LN"===u){var l=i.image.split(":").shift();t[l]||a.push(y(i,c,o,"TriplesBlock"))}})}({fullCtx:e,namespacesMap:F({},t.baseNamespacesMap,t.namespacesMap),cst:f.parseResult.cst,errors:i,semanticErrors:c})}}}),{semanticErrors:c,errors:i,cst:n}},t.SrsDoc=t.RULE("SrsDoc",function(){t.SUBRULE(t.turtleDoc),t.MANY(function(){t.SUBRULE(t.RuleDoc),t.MANY1(function(){t.SUBRULE(t.triples),t.CONSUME(o.d.Period)})})}),t.RuleDoc=t.RULE("RuleDoc",function(){t.OPTION(function(){return t.SUBRULE(t.RuleClause)}),t.SUBRULE(t.IfClause),t.SUBRULE(t.ThenClause)}),t.RuleClause=t.RULE("RuleClause",function(){t.CONSUME(N.Rule),t.SUBRULE(t.iri)}),t.IfClause=t.RULE("IfClause",function(){t.CONSUME(N.If),t.CONSUME(N.GroupGraphPattern)}),t.ThenClause=t.RULE("ThenClause",function(){t.CONSUME(N.Then),t.CONSUME(o.d.LCurly),t.CONSUME(N.TriplesBlock),t.CONSUME(N.EndThen)}),t.lexer=new c.Lexer(S),c.Parser.performSelfAnalysis(t),t}return g(SrsParser,e),SrsParser}(TurtleParser.a);t.d(n,"SrsParser",function(){return D}),t.d(n,"multiModeLexerDefinition",function(){return S}),t.d(n,"srsTokenMap",function(){return N}),t.d(n,"srsTokenTypes",function(){return O})},8:function(e,n,t){"use strict";t.d(n,"b",function(){return a}),t.d(n,"c",function(){return o}),t.d(n,"a",function(){return i});var r=function(){return(r=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e}).apply(this,arguments)},a=function(e,n){u(e,null,n)},o=function(e,n){u(e,null,n,!1)};function i(e){return Boolean(e&&"name"in e)}var c=function(){return function(e){var n=e.node,t=e.parentCtx;this.node=r({},n),this.parentCtx=r({},t)}}(),u=function(e,n,t,a){if(void 0===n&&(n=new c({node:e})),void 0===a&&(a=!0),!i(e))return t(a?r({},n):n);var o=e.children;Object.keys(o).forEach(function(e){var r=o[e];r.length&&r.forEach(function(e){var r=a?new c({node:e,parentCtx:n}):{node:e,parentCtx:n};t(r,function(n){var o=r;n&&(o=a?new c({node:n.node,parentCtx:n.parentCtx}):{node:n.node,parentCtx:n.parentCtx}),u(e,o,t,a)})})})}}})});
//# sourceMappingURL=millan.srs.js.map